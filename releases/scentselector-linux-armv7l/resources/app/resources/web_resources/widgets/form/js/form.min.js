!function(t){t(document).ready(function(){function e(t){var e=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,n=t.toLowerCase().match(e),r=n[2],a=n[3],o=n[4]||"";return("http:"==r&&":80"==o||"https:"==r&&":443"==o)&&(o=""),r+"//"+a+o}function n(t){var e="Not found",n=[];return location.search.substr(1).split("&").forEach(function(t){n=t.split("="),"name"===n[0]&&(e=decodeURIComponent(n[1]))}),e}t(".form-datepicker").datepicker({showOn:"button",buttonImage:"/web_resources/widgets/form/images/calendar.gif",dateFormat:"d M, yy",buttonImageOnly:!0,changeMonth:!0,changeYear:!0,onClose:function(e,n){t(this).trigger("focusout")}}),t(".perc-form").find("form").each(function(){var r=n(location.href),a=0;a=t('option[data-personname="'+r+'"]').length,"Not found"!==r&&a>0&&(document.querySelector('option[data-personname="'+r+'"]').selected="selected");var o=t(this).attr("action");if(o&&0==o.indexOf("/perc-form-processor")){var i=t.isFunction(t.getCm1License)?t.getCm1License():"",c=t.isFunction(t.getCm1Version)?t.getCm1Version():"";o=t.getDeliveryServiceBase()+o+(-1!=o.indexOf("?")?"&":"?")+"perc-tid="+i+"&perc-version="+c,t(this).attr("action",o),t(this).append(t("<input/>").attr("type","hidden").attr("name","perc_hostUrl").attr("value",e(location.href)))}var s={};t(this).find("input[type=text], textarea").each(function(){t(this).attr("fieldmaxlength")>0&&("undefined"==typeof s[t(this).attr("name")]&&(s[t(this).attr("name")]={}),s[t(this).attr("name")].maxlength=t(this).attr("fieldmaxlength"))}),t(this).validate({errorClass:"form-error-msg",errorPlacement:function(t,e){"checkbox"==e.attr("type")?t.appendTo(e.parent().parent()):t.appendTo(e.parent())},rules:s})})})}(jQuery);